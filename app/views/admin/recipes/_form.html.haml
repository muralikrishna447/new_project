= semantic_form_for [:admin, @recipe] do |f|
  = f.inputs name: "Recipe Details" do
    = f.input :title
    = f.input :yield
    = f.input :activity
  = f.inputs name: "Ingredients" do
    %li= copy_button('Add Ingredient', '#ingredient-row', 'table#ingredients')
    %table.nested-records#ingredients
      %tr
        %th Ingredient
        %th Quantity
        %th Unit
      = render 'ingredient_form', :ingredient => nil
      - @recipe.ingredients.each do |ingredient|
        = render 'ingredient_form', :ingredient => ingredient

  = f.inputs name: "Steps" do
    %li= copy_button('Add Step', '#step-row', 'table#steps')
    %table.nested-records#steps
      %tr
        %th Title
        %th Directions (Markdown or HTML)
        %th Image Id
        %th Youtube Id
      %tr#step-row
        %td
          = text_field_tag 'recipe[steps][][title]'
          = hidden_field_tag 'recipe[steps][][id]'
        %td= text_area_tag 'recipe[steps][][directions]', nil, rows: 10
        %td= text_field_tag 'recipe[steps][][image_id]'
        %td= text_field_tag 'recipe[steps][][youtube_id]'
      - @recipe.steps.each do |step|
        %tr
          %td
            = text_field_tag 'recipe[steps][][title]', step.title
            = hidden_field_tag 'recipe[steps][][id]', step.id
          %td= text_area_tag 'recipe[steps][][directions]', step.directions, rows: 10
          %td= text_field_tag 'recipe[steps][][image_id]', step.image_id
          %td
            = text_field_tag 'recipe[steps][][youtube_id]', step.youtube_id
            = button_tag 'X', {data: { behavior: 'remove-element', 'remove-target' => 'tr'}}

  = f.actions do
    = f.action :submit, as: :button
    = f.action :cancel, as: :link

