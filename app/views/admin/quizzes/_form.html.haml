- submit_options = @quiz.persisted? ? {label: 'Save Details'} : {label: 'Add Questions'}

= render 'layouts/filepicker'

:javascript
  window.ChefStepsAdmin = window.ChefStepsAdmin || {};
  window.ChefStepsAdmin.quizImageData = JSON.parse('#{j((@quiz.image || {}).to_json)}');

= semantic_form_for [:admin, @quiz] do |f|
  = f.inputs name: "Quiz Details" do
    = f.input :published
    = f.input :title
    = f.input :activity
    = f.input :start_copy, label: 'Start Message'
    = f.input :end_copy, label: 'End Message'
    %li
      %label.label Quiz Image
      %button#upload-image.admin-button{type: 'button', data: {behavior: 'filepicker'}} Upload Quiz Image
      .image
    = f.semantic_fields_for :image, @quiz.image || Image.new do |image|
      = image.input :id, as: :hidden
      = image.input :filename, as: :hidden
      = image.input :url, as: :hidden
      = image.input :_destroy, as: :hidden
    %li
      = f.actions do
        = f.action :submit, submit_options
        = f.action :cancel, wrapper_html: {class: :cancel}, label: 'Cancel'
  - if @quiz.persisted?
    = link_to 'Edit Questions', manage_questions_admin_quiz_path(@quiz), class: 'admin-button'

