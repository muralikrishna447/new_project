.cs-nav-container.nav-fixed.nav-visible(ng-controller='NavController as nav' ng-class="{'nav-visible': nav.visibleNav, 'nav-hidden': nav.hiddenNav, 'nav-fixed': nav.fixedNav, 'nav-show-menu': nav.showMenu}")
  %alerts
  .cs-nav

    .cs-nav-center.hide-mobile
      = render 'layouts/nav_items'

    .cs-nav-left
      %a(href='/')
        %img.logo-color(src="https://d92f495ogyf88.cloudfront.net/static/chefsteps-logo-h.png" id="chefsteps-logo")
        %img.logo-white(src="https://d92f495ogyf88.cloudfront.net/static/chefsteps-logo-white.png" id="chefsteps-logo")

    .cs-nav-right(ng-show="!editMode" ng-cloak ng-controller="LoginController" ng-init="registrationSource='nav'; authentication.setCurrentUser(#{current_user.to_json(methods: :authentication_token, include: [:enrollments])}); setIntent('ftue')")
      = render "devise/sessions/new_angular"
      %a.cs-nav-item.hide-mobile(href='/gallery')
        %i.fa.fa-search

      .dropdown.dropdown-right.cs-nav-item.hide-mobile(ng-controller='csDropdownController as dropdown' ng-if="authentication.currentUser()")
        .dropdown-toggle(ng-click='dropdown.toggle($event)')
          = image_tag current_user.avatar_url
        .dropdown-menu(ng-show='dropdown.showMenu')
          .dropdown-wrapper
            .dropdown-menu-item
              %a(ng-href="/profiles/{{authentication.currentUser().slug}}")Profile

            .dropdown-menu-item
              %a(ng-href="/profiles/{{authentication.currentUser().slug}}/edit")Settings

            .dropdown-menu-item
              %a(ng-href="/logout")Sign Out


      %a.cs-nav-item.button.small.hide-mobile#nav-login(ng-click="openModal('login')" ng-if='! authentication.currentUser()')
        Sign In

      %button.cs-nav-item.cs-nav-menu-toggle.lines-btn.hide-desktop(ng-click="nav.showMenu = ! nav.showMenu")
        %span.lines
