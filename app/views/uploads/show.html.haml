- content_for :title, "#{@upload.title.html_safe} - Photo"
- content_for :description, @upload.notes != "" ? @upload.notes.html_safe : @upload.title.html_safe
- content_for :canonical_link, upload_url(@upload) if @upload.id
- content_for :keywords, @upload.title.split(' ').join(',')
- content_for :ajax_seo do
  %meta{name: "fragment", content: "!"}

.container
  .row
    .span8
      %h2= @upload.title
    .span4
      .pull-right.btn.btn-primary ADD AS COMMUNITY RECIPE
  .row
    .span6
      .section
        = image_tag filepicker_hero_image(@upload.image_id)
      .lead.section
        %p= @upload.notes
        - if @upload.assembly && @upload.assembly.title == 'Spherification'
          %hr
          .row
            .span3.offset1.section.text-center{:style => "padding: 20px; border: 1px solid  #e25f25;"}
              = link_to landing_class_path('spherification', anchor: 'enthusiast') do
                = image_tag 'https://d3awvtnmmsvyot.cloudfront.net/api/file/AE4undUwRLqq9l69DVIV'
        - if @upload.assembly && @upload.assembly.title == 'Knife Sharpening'
          .row
            .span6
              = link_to knife_collection_path do
                = image_tag 'https://d3awvtnmmsvyot.cloudfront.net/api/file/4Koc6GmGSRCLx3PC2GQs?v=photo'

    .span6
      %p.lead
        - if @upload.assembly
          = "#{link_to @upload.user.name, user_profile_path(@upload.user)} shared this #{link_to @upload.assembly.title, assembly_type_path(@upload.assembly)} photo on #{link_to 'ChefSteps', 'http://www.chefsteps.com'}.".html_safe
        - else
          = "#{link_to @upload.user.name, user_profile_path(@upload.user)} shared this #{link_to @upload.activity.title, @upload.activity} photo on #{link_to 'ChefSteps', 'http://www.chefsteps.com'}.".html_safe
      %p= "#{time_ago_in_words(@upload.created_at)} ago."
      %div(ng-controller="NonAngularSocialController" ng-init="title='#{escape_javascript @upload.title}'; url='#{upload_url(@upload)}'; media='#{filepicker_hero_image(@upload.featured_image)}'")
        = render 'layouts/social_buttons', media_object: @upload, url: upload_url(@upload)

      .section
        - if @upload.likes.any?
          %h4 
            = @upload.likes_count
            - if @upload.likes_count > 1
              people like this:
            - else
              person likes this:
          - @upload.likes.each do |like|
            .section
              - if current_user == like.user
                = image_tag filepicker_circle_image(like.user.image_id), class: "img-circle", width: "30"
                = "You liked this #{time_ago_in_words(like.created_at)} ago."
              - else
                = link_to user_profile_url(like.user) do
                  = image_tag filepicker_circle_image(like.user.image_id), class: "img-circle", width: "30"
                  = like.user.name
                liked this
                = "#{time_ago_in_words(like.created_at)}"
                ago
    
      %hr
      %div(ng-controller='csCommentsController')
        %comments(db-params="{'commentsId': 'upload_#{@upload.id}'}" on-login="showModal()")