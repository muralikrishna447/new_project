- cache activity do
  .span6.section#video-ingredient-unit
    .video-container{:itemscope => true, :itemprop => "video", :itemtype => "http://schema.org/VideoObject"}
      - if activity.youtube_id?
        - if params[:autoplay]
          %iframe{src: youtube_url(activity.youtube_id, 1)}
        - else
          %iframe{src: youtube_url(activity.youtube_id)}
      - elsif activity.image_id?
        = image_tag filepicker_activity_hero_image(activity.image_id), alt: activity.image_description, title: activity.image_description
    - if activity.description?
      .section
        :markdown
          #{apply_shortcodes(activity.description)}
    - if activity.ingredients.any?
      .activity-ingredients-list#full-ingredients-list.section{data: {target: ''}}
        .well
          = render 'ingredients_list', ingredients: activity.ingredients
    - if activity.yield.present?
      .section
        %h4 Yield
        %span{:itemprop => "recipeYield"}= activity.yield
    - if activity.timing.present?
      .section
        %h4 Timing
        = activity.timing
    - if activity.required_equipment.any?
      .section
        %h4 Equipment and Materials
        = render 'equipment_list', equipment: activity.required_equipment
    - if activity.used_in_activities.published.any?
      .section
        %h4 Used In
        %ul
        - activity.used_in_activities.published.each do |activity|
          %li= link_to activity.title.html_safe, activity
  .span6.section.scroll-shadow-wrapper
    .ordered-steps.scroll-shadow{:itemprop => "recipeInstructions"}
      .scroll-shadow-content.pull-left
        - activity.steps.each_with_index do |step, index|
          .ordered-step-item{id: "order-step-item-#{index}"}
            .step-element.step-number
              = index + 1
            .step-element.step-content
              - if step.title?
                %h4= step.title
              :markdown
                #{apply_shortcodes(step.directions)}
              .step-actions.btn-group
                -if step.ingredients.any?
                  .btn.step-action-item.step-ingredients.btn-primary
                    %i.icon-th-list
                - if step.image_id?
                  .btn.step-action-item.step-image-btn.btn-primary
                    %i.icon-picture
                - if step.youtube_id?
                  .btn.step-action-item.step-video-btn.btn-primary
                    %i.icon-facetime-video
              - if step.image_id?
                .step-image{:itemprop => "image", id: "step-image-#{index}"}
                  = image_tag filepicker_step_image(step.image_id), alt: step.image_description, title: step.image_description
              - if step.youtube_id?
                .step-video{id: "step-video-#{index}"}
                  .video-container
                    %iframe{src: youtube_url(step.youtube_id)}
              - if step.ingredients.any?
                .step-ingredients-source.well.section
                  = render 'ingredients_list', ingredients: step.ingredients
    .scroll-overlay-top
    .scroll-overlay-bottom