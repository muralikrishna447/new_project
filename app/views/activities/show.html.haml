%h1
  = @activity.title
- if @activity.description?
  %p
    :markdown
      #{@activity.description}

%hr

.row
  .span12
    .row
      .span6
        .video-container
          %iframe{src: youtube_url(@activity.youtube_id)}
        .row
          .span4
            = link_to 'Discuss this on the forum', '#', class: 'btn'
            = link_to 'Email this Recipe', '#', class: 'btn'
          .span2
            = link_to '#' do
              %i.icon-facebook
            = link_to '#' do
              %i.icon-google-plus
            = link_to '#' do
              %i.icon-twitter
            = link_to '#' do
              %i.icon-pinterest
      .span6
        .ordered-steps
          - @activity.steps.each_with_index do |step, index|
            .ordered-step-item
              .step-element.step-number
                = index + 1
              .step-element.step-image
                = image_tag s3_image_url(step.image_id)
              .step-element.step-content
                :markdown
                  #{raw step.directions}
              = link_to 'Need Help?', '#', class: 'btn btn-mini pull-right'

%hr

.row
  .span12
    .row
      .span6
        - if @activity.ingredients.any?
          = render 'ingredients_list', activity: @activity
        - if @activity.required_equipment.any?
          %h4 Equipment and Materials
          = render 'equipment_list', equipment: @activity.required_equipment
      .span6
        %h3 Techniques
        .carousel.slide#technique-carousel
          .carousel-inner
            - @techniques.each_with_index do |technique,index|
              %div{class: "item #{'active' if index == 0}"}
                = render 'shared/media_centered', media: technique, media_image: technique.step_images.last, main: 'Technique'
          = link_to '&lsaquo;'.html_safe, '#technique-carousel', class: 'carousel-control left', data: {slide: 'prev'}
          = link_to '&rsaquo;'.html_safe, '#technique-carousel', class: 'carousel-control right', data: {slide: 'next'}
        %h3 You might also like
        .carousel.slide#related-carousel
          .carousel-inner
            - @recipes.each_with_index do |technique,index|
              %div{class: "item #{'active' if index == 0}"}
                = render 'shared/media_centered', media: technique, media_image: technique.step_images.last, main: 'Recipe'
          = link_to '&lsaquo;'.html_safe, '#related-carousel', class: 'carousel-control left', data: {slide: 'prev'}
          = link_to '&rsaquo;'.html_safe, '#related-carousel', class: 'carousel-control right', data: {slide: 'next'}

= #TODO Remove old code below

/ - conditional_cache [activity, version], cache_unless: !cache_show do

/   - disqus_id = "activity-#{activity.id}"

/   - content_for :title, activity.title.html_safe
/   / - content_for :description, activity.description != "" ? activity.description.html_safe : activity.title.html_safe
/   - content_for :canonical_link, activity_url
/   - content_for :keywords, activity.tag_list.join(',')
/   - course = Course.find(params[:course_id]) if params[:course_id]

/   -if params[:scaling]
/     :javascript
/       paramScaling = #{params[:scaling]};

/   .recipe_schema{:itemscope => true, :itemtype => (activity.is_recipe? ? "http://schema.org/Recipe" : nil)}

/     = render 'courses/navigation', course: course, activity: activity, disqus_id: disqus_id

/     .noprint.activity-hero
/       .container
/         %h1= activity.title.html_safe
/         - if activity.youtube_id?
/           .video-container{:itemscope => true, :itemprop => "video", :itemtype => "http://schema.org/VideoObject"}
/             %iframe{src: youtube_url(activity.youtube_id), webkitallowfullscreen: true, mozallowfullscreen:true, allowfullscreen: true }
/           - if activity.transcript?
/             .transcript
/               .btn.btn-primary.pull-right{data: {toggle: 'collapse', target:"#transcript-activity-#{activity.id}"}}
/                 %i.icon-pencil
/                   transcript
/               .transcript-content.collapse{id: "transcript-activity-#{activity.id}"}
/                 = activity.transcript
/         - else
/           - if activity.image_id?
/             .activity-image
/               = image_tag s3_image_url(activity.image_id)

/     = render 'overview', activity: activity
/     -if activity.steps.any?
/       #step-by-step
/         = render 'step_by_step', activity: activity
/     = render 'quizzes', activity: activity
/     = render 'cooked_this_button', activity: activity

/   = render 'layouts/disqus_comments', disqus_id: disqus_id, disqus_title: activity.title, disqus_url: activity_url
