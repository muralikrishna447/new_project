=render 'activities/step_side_edit_buttons'

%div(ng-show='! step.is_aside')
  %h1.step-number
    %div(collapse="step.hide_number" ng-bind="stepNumber($index)")

  %h4(cs-contenteditable="editMode" ng-model="step.title")

  .step-first-row
    =render 'activities/step_ingredients'

  .step-content(cs-contenteditable="editMode" ng-model="step.directions")

  .step-last-row(ng-show='((!! step.youtube_id) || (!! step.image_id))')

    %div(ng-show='hasAV()')
      .step-video-outer.noprint(ng-show="!! step.youtube_id")
        .new-step-video(id="{{'step-video-' + $index}}")
          .video-container(csenforceaspect)
            %iframe(cssrcreplacer="{{'//www.youtube.com/embed/' + step.youtube_id + '?wmode=opaque&rel=0&modestbranding=1&showinfo=0&vq=hd720'}}")

      -# Image only if there is no video
      .step-image-outer(ng-show="(! step.youtube_id) && (!! step.image_id)")
        .new-step-image(id="{{'step-image-' + $index}}")
          %img(ng-src="{{stepImageURL(step, 670)}}" alt="{{stepImageDescription(step)}}" title="{{stepImageDescription(step)}}" itemprop="image")
  
  =render 'activities/step_edit_images'

%div(ng-include="'/client_views/_aside'")
