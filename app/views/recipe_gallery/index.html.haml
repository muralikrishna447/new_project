.container
  .row
    .span12#recipe-gallery
      %h2 Recipes

      / .gallery-filter
      /   .dropdown
      /     = link_to 'javascript:void;', class: 'dropdown-toggle' do
      /       %div 
      /         - if params[:by_order].blank?
      /           Most Recent
      /         - else
      /           = params[:by_order] == 'desc' ? 'Most Recent' : 'Oldest'
      /         %i.icon-angle-down
      /     %ul.dropdown-menu
      /       %li= link_to 'Most Recent', params.merge(by_order: 'desc', page: '')
      /       %li= link_to 'Oldest', params.merge(by_order: 'asc', page: '')
      /   .dropdown
      /     = link_to 'javascript:void;', class: 'dropdown-toggle' do
      /       %div 
      /         = params[:difficulty].blank? ? 'Difficulty' : params[:difficulty].titleize
      /         %i.icon-angle-down
      /     %ul.dropdown-menu
      /       %li= link_to 'Easy', params.merge(difficulty: 'easy', page: '')
      /       %li= link_to 'Intermediate', params.merge(difficulty: 'intermediate', page: '')
      /       %li= link_to 'Advanced', params.merge(difficulty: 'advanced', page: '')
      /   .dropdown
      /     = link_to recipe_gallery_index_path do
      /       %div 
      /         Clear x

      / = paginate @recipes
      / %div{style: 'float: left; width: 100%;'}
      /   - @recipes.each do |recipe|
      /     = render 'shared/media_box_3', url: activity_path(recipe), title: recipe.title, image: recipe.featured_image, object: recipe
      / = paginate @recipes

.container
  .row
    .span12
      %div(ng-controller='GalleryController')
        %h1
        / .flat-form
        /   %form
        /     %input(ng-model='search' placeholder='Enter Name')
        .gallery-filter(ng-cloak='' )
          .dropdown
            = link_to 'javascript:void(0);', class: 'dropdown-toggle' do
              {{date_type || 'Date'}}
              %i.icon-angle-down
            %ul.dropdown-menu
              %li(ng-click="date = '-published_at' ; date_type = 'Most Recent'")
                = link_to 'Most Recent', 'javascript:void(0);'
              %li(ng-click="date = 'published_at' ; date_type = 'Oldest'")
                = link_to 'Oldest', 'javascript:void(0);'
          .dropdown
            = link_to 'javascript:void(0);', class: 'dropdown-toggle' do
              {{filters.difficulty || 'Difficulty'}}
              %i.icon-angle-down
            %ul.dropdown-menu
              %li(ng-click="filters.difficulty = 'easy'")
                = link_to 'Easy', 'javascript:void(0);'
              %li(ng-click="filters.difficulty = 'intermediate'")
                = link_to 'Intermediate', 'javascript:void(0);'
              %li(ng-click="filters.difficulty = 'advanced'")
                = link_to 'Advanced', 'javascript:void(0);'
          .dropdown
            %div(ng-show="filters.difficulty || date_type" ng-click="filters = {} ; date_type = null; date = '-updated_at'")
              = link_to 'Clear x', 'javascript:void(0);'
        %div
          .media-box-3(ng-cloak='' ng-repeat='activity in activities | filter:search | filter:filters | orderBy:date' ng-animate="'gallery-animation'")
            %a(href= 'activities/{{activity.slug}}')
              .media-box-3-title
                {{activity.title}}
              %img(ng-src="{{activityImageURL(activity, 400)}}")
              .media-box-3-footer
                .footer-left
                  {{activity.difficulty}}
