- content_for :title, "Recipe Gallery"
- content_for :description, "Become a better cook. Learn from our beautiful recipe videos."
- content_for :keywords, @recipes.map(&:title).to_sentence
- content_for :ajax_seo do
  %meta{name: "fragment", content: "!"}

.gallery-wrapper.relative(ng-controller='GalleryController' ng-cloak)
  .gallery-filter.navbar
    %ul.nav.left-group

      %form.navbar-search.relative
        %input.search-query(ng-model='input' ng-change='search(input)' placeholder='search')
        %a.clear-search(ng-click="clearSearch()")
          %i.icon-remove

      %li
        %h5 Popular
        %a( ng-repeat="x in suggestedSearches" 
            ng-click="search(x)" 
            ng-class="{'active' : filters['search_all'] == x}")
          %span {{x}}

      %li
        %h5 Difficulty
        %csRadioButtons(ng-model="difficultyChoices" active="filters.difficulty")

      %li
        %h5 Source
        %csRadioButtons.first-separate(ng-model="generatorChoices" active="filters.generator")

      %li
        %h5 Admin
        %csRadioButtons.first-separate(ng-model="publishedStatusChoices" active="filters.published_status" ng-if="csAuthentication.isAdmin()")

      %li
        %h5 Sort
        %div
          %a( ng-repeat="choice in getSortChoices()" 
                ng-click="filters.sort = choice" 
                ng-class="{active: filters.sort == choice}")
            {{choice}}


    -#.add-group.btn-group.pull-right(ng-show="(filters.generator != 'chefsteps') || csAuthentication.isAdmin()")
      -#%a.btn.btn-secondary.add-button(href="/activities/new")
        -# Add Recipe

  .gallery-results
    .no-results(ng-cloak ng-show='noResults && !dataLoading')
      %h3 No results found.

    .gallery-items(infinite-scroll='next()' infinite-scroll-disabled='dataLoading' infinite-scroll-immediate-check='true' infinite-scroll-distance='2' ng-cloak)
      %cs-index-item.cs-index-item(ng-repeat='activity in activities track by activity.id' cs-title='activity.title' url='activity.url' image='activity.image' hover-info='<i class="icon-star-empty"></i> {{activity.likesCount}}')

    .loading-icon-group(ng-show="dataLoading && ! doneLoading")
      %i.icon-page-load
= render 'home/madlib_popup', registration_source: 'gallery'
