.login-modal(close="closeModal()" modal="loginModalOpen" options="modalOptions" ng-cloak)
  %form(ng-submit="showForm=='signIn' ? login() : register()")
    .modal-body.login-modal-body
      .close-x.pull-right(ng-click="closeModal()")
        %i.icon-remove
      .row-fluid(ng-show="showForm=='signIn'" ng-animate='slide')
        %h3 Sign in to ChefSteps
        .form-horizontal(ng-show="!authentication.currentUser()")
          %i.loading-spinner.icon-spinner.icon-spin(ng-show="dataLoading")
          .error(ng-show="login_error.message")
            %p {{login_error.message}}
          .message(ng-show="message")
            %p {{message}}
          %div(ng-class="{error: login_error.errors.email}")
            %input.input-block-level(ng-model="login_user.email" placeholder="Email")
            %div(ng-show="login_error.errors.email")
              %div(ng-repeat="field_error in login_error.errors.email")
                {{field_error}}
          %div(ng-class="{error: login_error.errors.password}")
            %input.input-block-level(type="password" ng-model="login_user.password" placeholder="Password")
            %div.pull-right.tiny-note
              = link_to 'Forgot your password?', new_user_password_path
            %div(ng-show="login_error.errors.email")
              %div(ng-repeat="field_error in login_error.errors.password")
                {{field_error}}
      .row-fluid(ng-show="showForm=='signUp'" ng-animate='slide')
        %h3 Sign up to ChefSteps
        .form-horizontal(ng-show="!authentication.currentUser()")
          %i.loading-spinner.icon-spinner.icon-spin(ng-show="dataLoading")
          .error(ng-show="register_error.message")
            %p {{register_error.message}}
          .message(ng-show="message")
            %p {{message}}
          %div(ng-class="{error: register_error.errors.name}")
            %input.input-block-level(ng-model="register_user.name" placeholder="Name")
            %div(ng-show="register_error.errors.name")
              %div(ng-repeat="field_error in register_error.errors.name")
                {{field_error}}
          %div(ng-class="{error: login_error.errors.email}")
            %input.input-block-level(ng-model="register_user.email" placeholder="Email")
            %div(ng-show="register_error.errors.email")
              %div(ng-repeat="field_error in register_error.errors.email")
                {{field_error}}
          %div(ng-class="{error: login_error.errors.password}")
            %input.input-block-level.password-with-show-button(type="{{passwordType}}" ng-model="register_user.password" placeholder="Password")
            %a.btn.show-password(ng-click="togglePassword()")
              Show
            %div(ng-show="register_error.errors.email")
              %div(ng-repeat="field_error in register_error.errors.password")
                {{field_error}}
    .modal-footer.login-modal-footer
      .sign-out-buttons.button-group(ng-show="authentication.currentUser()")
        %div
          %button.btn.btn-primary.btn-large.sign-out(ng-show="authentication.currentUser()" ng-click="logout()") Sign Out
      .sign-in-buttons.button-group(ng-show="showForm=='signIn'" ng-animate='slide')
        %div
          %button.btn.btn-primary.btn-large.signin(ng-click="login()") Sign in
        = render 'devise/shared/facebook_login', text: 'Sign in with <b>Facebook</b>'
        %hr
        %div
          %a.switch-to-signup(ng-click="switchForm('signUp')")
            Get an Account
      .sign-up-buttons.button-group(ng-show="showForm=='signUp'")
        %div
          %button.btn.btn-primary.btn-large.signup(ng-click="register()") Sign Up
        = render 'devise/shared/facebook_login', text: 'Sign Up with <b>Facebook</b>'
        %hr
        %div
          %a.switch-to-signin(ng-click="switchForm('signIn')")
            Already have an account


  -# .container#main-container
  -#   .row
  -#     .span5.offset1
  -#     .span5.registration
  -#       .login-container.container.relative(ng-controller="LoginController")
  -#         %h3 Sign into Chefsteps
  -#         .form-horizontal
  -#           %i.loading-spinner.icon-spinner.icon-spin(ng-show="dataLoading")
  -#           .error(ng-show="login_error.message")
  -#             %p {{login_error.message}}
  -#           .message(ng-show="message")
  -#             %p {{message}}
  -#           %div(ng-class="{error: login_error.errors.email}")
  -#             Email
  -#             %input.input-block-level(ng-model="login_user.email" placeholder="Email")
  -#             %div(ng-show="login_error.errors.email")
  -#               %div(ng-repeat="field_error in login_error.errors.email")
  -#                 {{field_error}}
  -#           %div(ng-class="{error: login_error.errors.password}")
  -#             Password
  -#             %input.input-block-level(type="password" ng-model="login_user.password" placeholder="Password")
  -#             %div(ng-show="login_error.errors.email")
  -#               %div(ng-repeat="field_error in login_error.errors.password")
  -#                 {{field_error}}
  -#           %button.btn.btn-primary.btn-large(ng-click="login()") Sign in
  -#           %button.btn.btn-primary.btn-large(ng-click="logout()") Sign Out
  -#           = render 'devise/shared/facebook_login', text: 'Log in with <b>Facebook</b>'
  -#           %div= "Forgot your password? #{link_to 'Reset password', new_user_password_path}".html_safe