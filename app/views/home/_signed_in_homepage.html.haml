.container.home-signed-in
  .row
    .span12
      .row.section
        .span10
          %h2
            = link_to 'Latest from ChefSteps', gallery_index_path, class: 'orange-link'
        .span2.text-right
          = link_to 'See More', gallery_index_path, class: 'btn btn-large btn-outline-blue-large'
      = render 'shared/horizontal_slider', items: @latest, direction: 'right'

  .row
    .span8
      .home-section
        %h2
          = link_to 'Courses', courses_path, class: 'orange-link'
        - @courses.each.with_index do |course, index|
          - if index == 0
            .home-featured-item
              = link_to course do
                %h3= course.title
                = image_tag filepicker_stream_image(course.featured_image)
                .section.pull-right
                  = where_user_left_off_in_course(course, current_user, 'btn btn-primary btn-large')
              .section
                = course.short_description
          -else
            .home-standard-item
              .home-standard-item-image
                = link_to course do
                  = image_tag filepicker_stream_image(course.featured_image)
              .home-standard-item-text
                = link_to course do
                  %h3= course.title
                = course.short_description
      .home-section
        %hr
      .home-section
        %h2
          = link_to 'Projects', projects_path, class: 'orange-link'
        - @projects.each.with_index do |project, index|
          .home-standard-item
            .home-standard-item-image
              = link_to project_path(project) do
                = image_tag filepicker_stream_image(project.featured_image)
            .home-standard-item-text
              = link_to project_path(project) do
                %h3= project.title
              = project.description
    .span4
      %h2 
        = link_to 'Community Activity', community_activity_path, class: 'orange-link'
      / .stream
      /   - @followings_stream.each do |event|
      /     - path_array = event.group_type.downcase.split('_')
      /     - folder = path_array.first
      /     - file = (path_array - [folder]).join('_')
      /     = render "/activity_stream/#{folder}/#{file}", event: event
      /     %hr
      / = paginate @followings_stream
      .stream(ng-controller='StreamsController' ng-init="init()")
        %div(ng-repeat='stream in streams')
          %div(ng-include src="streamViewTemplate(stream)")
          / %div(ng-switch="stream.group_type")
          /   %div(ng-switch-when='Comment_create')
          /     %div(ng-include src="'stream_views/comment_create.html'")
          /   %div(ng-switch-when='Course_enroll')
          /     %div(ng-include src="'stream_views/course_enroll.html'")
          /   %div(ng-switch-when='Like_create')
          /     %div(ng-include src="'stream_views/like_create.html'")
          /   %div(ng-switch-when='Upload_create')
          /     %div(ng-include src="'stream_views/upload_create.html'")
          /   %div(ng-switch-when='Vote_create')
          /     %div(ng-include src="'stream_views/vote_create.html'")

        .stream-more
          / %a.btn.btn-large.btn-block.btn-outline-blue-large(ng-click="loadMore()")
          /   See More
          = link_to 'See More', community_activity_path, class: 'btn btn-large btn-block btn-outline-blue-large'
    .span2
