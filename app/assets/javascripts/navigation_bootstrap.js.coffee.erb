window.ChefSteps = {}

class ChefSteps.NavigationBootstrap
  constructor: (@headerTarget) ->

  cssLink: "<link rel=stylesheet type='text/css' href='http://<%= DOMAIN %>/assets/global_navigation.css' />"

  getHeader: =>
    jQuery.ajax
      url: "http://<%= DOMAIN %>/global-navigation"
      dataType: 'html'
      type: "GET"
      success: @loadHeader

  loadCSS: =>
    jQuery(@cssLink).appendTo('head')

  loadHeader: (response) =>
    jQuery(@headerTarget).html(response)

  fixNavLinks: =>
    $('body .nav a').live 'click', ->
      top.location = $(this).attr('href')

  bootstrap: =>
    @loadCSS()
    @getHeader()
    @fixNavLinks()

