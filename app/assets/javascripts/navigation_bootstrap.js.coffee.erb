window.ChefSteps = {}

class ChefSteps.NavigationBootstrap
  constructor: (@headerTarget) ->

  cssLink: "<link rel=stylesheet type='text/css' href='http://<%= DOMAIN %>/assets/global_navigation.css' />"

  getHeader: =>
    jQuery.ajax
      url: "http://<%= DOMAIN %>/global-navigation"
      type: "GET"
      success: @loadHeader
      beforeSend: @allowOrigin

  loadCSS: =>
    jQuery(@cssLink).appendTo('head')

  loadHeader: (response) =>
    jQuery(@headerTarget).html(response)

  bootstrap: =>
    @loadCSS()
    @getHeader()

  allowOrigin: (xhr) ->
    xhr.setRequestHeader("Access-Control-Allow-Origin", "http://<%= DOMAIN %>")

